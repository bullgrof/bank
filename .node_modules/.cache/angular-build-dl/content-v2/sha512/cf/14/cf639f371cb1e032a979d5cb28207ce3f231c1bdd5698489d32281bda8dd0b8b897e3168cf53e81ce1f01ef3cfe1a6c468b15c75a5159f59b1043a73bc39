{"version":3,"sources":["src/app/pages/renewal/renewal.page.html","src/app/pages/renewal/renewal.module.ts","src/app/pages/renewal/renewal.page.scss","src/app/pages/renewal/renewal.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"warning\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/login\\\" icon-only></ion-back-button>\\n      Renovación\\n    </ion-buttons>\\n\\n    <ion-title>\\n\\n\\n    </ion-title>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>  \\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"card-outline\\\"></ion-icon>\\n      <ion-label class=\\\"planactual\\\"> Su Plan actual</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"calendar-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">07/04/2020</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Expira en</label>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"today-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">12 Días</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Días restantes</label>\\n        </ion-col>   \\n      </ion-row>    \\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"barcode-outline\\\"></ion-icon>\\n      <ion-label>Renovar con licencia</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <form (ngSubmit)=\\\"tokenCheck(frenewal)\\\" #frenewal=\\\"ngForm\\\">  \\n        <ion-row>          \\n            <ion-col size=\\\"8\\\">\\n              <ion-input name=\\\"lic\\\"  placeholder=\\\"Ingrese licencia\\\" [(ngModel)]=\\\"renewalLic.lic\\\" required></ion-input>\\n            </ion-col>\\n            <ion-col size=\\\"2\\\">\\n              <ion-button type=\\\"submit\\\"  color=\\\"warning\\\">Verificar</ion-button>\\n            </ion-col>          \\n        </ion-row>\\n      </form>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"power-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">{{ state }}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Estado</label>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"today-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">{{days}}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Días del plan</label>\\n        </ion-col>   \\n      </ion-row>\\n      <ion-row>\\n      <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"phone-portrait-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label\\\" >{{ plan }}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Plan</label>\\n        </ion-col>\\n      </ion-row>\\n      <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" color=\\\"warning\\\" (click)=\\\"renewal()\\\">Renovar Licencia</ion-button>   \\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"logo-bitcoin\\\"></ion-icon>\\n      <ion-label>Pago con Bitcoin</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <label class=\\\"wallet\\\">hawoeHGj7152nhGEpoO0</label><br>\\n          <label class=\\\"labelwallet\\\">Click en la wallet para copiarla</label>\\n        </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <label for=\\\"\\\">Espacio para codigo QR</label>\\n        </ion-row>\\n        <ion-row>       \\n      </ion-row>    \\n    </ion-card-content>\\n  </ion-card>\\n\\n  \\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RenewalPage } from './renewal.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RenewalPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RenewalPage]\n})\nexport class RenewalPageModule {}\n","export default \".icons-page {\\n  margin-left: -5px;\\n  margin-right: 3px;\\n  width: 20px;\\n  height: 20px; }\\n\\n.primary-label {\\n  color: #000000;\\n  margin-top: 2px; }\\n\\n.secundary-label {\\n  font-size: 12px;\\n  color: grey;\\n  margin-left: 18px;\\n  margin-top: 0px; }\\n\\n.wallet {\\n  color: black;\\n  text-align: center; }\\n\\n.labelwallet {\\n  font-size: 12px; }\\n\\n.planactual {\\n  margin-left: 3px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVuZXdhbC9DOlxcVXNlcnNcXE5lbWVzc2lzXFxEZXNrdG9wXFxwdjJcXGZyb250XFxjb3JlXFxmc3Uvc3JjXFxhcHBcXHBhZ2VzXFxyZW5ld2FsXFxyZW5ld2FsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsV0FBVztFQUNYLFlBQVksRUFBQTs7QUFHaEI7RUFDSSxjQUFjO0VBQ2QsZUFBZSxFQUFBOztBQUduQjtFQUNJLGVBQWU7RUFDZixXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLGVBQWUsRUFBQTs7QUFHbkI7RUFDSSxZQUFZO0VBQ1osa0JBQWtCLEVBQUE7O0FBR3RCO0VBQ0ksZUFBZSxFQUFBOztBQUduQjtFQUNJLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcmVuZXdhbC9yZW5ld2FsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29ucy1wYWdle1xyXG4gICAgbWFyZ2luLWxlZnQ6IC01cHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDNweDtcclxuICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG59XHJcblxyXG4ucHJpbWFyeS1sYWJlbHtcclxuICAgIGNvbG9yOiAjMDAwMDAwO1xyXG4gICAgbWFyZ2luLXRvcDogMnB4O1xyXG59XHJcblxyXG4uc2VjdW5kYXJ5LWxhYmVse1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgY29sb3I6IGdyZXk7XHJcbiAgICBtYXJnaW4tbGVmdDogMThweDtcclxuICAgIG1hcmdpbi10b3A6IDBweDtcclxufVxyXG5cclxuLndhbGxldHtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmxhYmVsd2FsbGV0e1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4ucGxhbmFjdHVhbHtcclxuICAgIG1hcmdpbi1sZWZ0OiAzcHg7XHJcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\n\nimport { TokenService } from '../../services/tokens.service';\nimport { ToastController } from '@ionic/angular';\n\nimport { Storage } from '@ionic/storage';\nimport { UsersService } from '../../services/users.service';\n\n@Component({\n  selector: 'app-renewal',\n  templateUrl: './renewal.page.html',\n  styleUrls: ['./renewal.page.scss'],\n})\nexport class RenewalPage implements OnInit {\n\n  renewalLic = {\n    lic : ''\n  }\n  characters ;\n  stateToken;\n  state = ' - ';\n  idPlan;\n  plan='';\n  infoToken;\n  days;\n\n  username;\n  userid;\n\n  dataRenewal = {\n      userid : '',\n      expire : ''\n  }\n\n\n  constructor(private tService : TokenService,\n              private toastCtrl: ToastController,\n              private storage: Storage,\n              private userService: UsersService\n              ) { }\n\n  ngOnInit() {\n  }\n\n  renewal(frenewal: NgForm){\n    console.log('FORMULARIO INGRESA', this.renewalLic.lic);\n    console.log('Dias del plan ', this.days);    \n    this.storage.get('username').then((result)=>{\n      this.username = result;\n      this.userService.getSekretId(this.username).subscribe( response=>{\n        this.userid = response.user[0]._id;\n        console.log('ID del usuario qeu va a renovar la licencia', this.userid);\n\n        let datNow = new Date();\n        console.log('hoy', datNow);\n        datNow.setDate(datNow.getDate() + this.days);\n        let newDateSum = datNow.getFullYear() + '-' + (datNow.getMonth() + 1 ) + '-' + datNow.getDate() + '-';        \n        console.log('NUEVA FECHA SUMADA', newDateSum);\n\n        this.dataRenewal = {\n          userid : this.userid,\n          expire : newDateSum\n      }\n      this.userService.renewalLisence(this.dataRenewal).subscribe(resp => {\n        console.log('Respuesta renovacion', response);\n      });\n\n\n      })\n    });    \n  }\n\n  tokenCheck(frenewal: NgForm){\n   // console.log('FORMULARIO INGRESA', this.renewalLic.lic);\n    \n    this.characters = this.renewalLic.lic.length;\n    if (this.characters === 20) {\n      this.tService.getVerifyToken(this.renewalLic.lic).subscribe(resp => {\n        console.log('RESPUESTA DEL TOKEN INGRESADO',resp);\n        if ( Object.entries(resp.tokens).length === 0) {\n          this.presentToast('El tocken ingresado no existe');    \n          \n        }else{\n          this.presentToast('El tocken se encuentra disponible');    \n          this.idPlan = resp.tokens[0].idplan;\n          this.stateToken =  resp.tokens[0].state;\n          if (this.stateToken === '1') {\n            this.state = 'Disponible';\n          }else{\n            this.state = 'No disponible'\n          }\n          this.tService.getRemainingDays(this.idPlan).subscribe(respPlan => {\n            this.infoToken = respPlan.plans[0] ;\n            this.plan = this.infoToken.type;\n            this.days = this.infoToken.timetoexpire;\n          })\n        }\n      })\n    }else{\n      this.presentToast('El tocken No esta registrado');\n    }\n  }\n\n\n\n  async presentToast(message: string) {\n    const toast = await this.toastCtrl.create({\n      message,\n      duration: 2000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n}// END class\n"],"sourceRoot":"webpack:///","file":"pages-renewal-renewal-module-es5.js"}