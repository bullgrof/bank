{"version":3,"sources":["./src/app/pages/renewal/renewal.page.html","./src/app/pages/renewal/renewal.module.ts","./src/app/pages/renewal/renewal.page.scss","./src/app/pages/renewal/renewal.page.ts"],"names":[],"mappings":"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","file":"pages-renewal-renewal-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"warning\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/login\\\" icon-only></ion-back-button>\\n      Renovación\\n    </ion-buttons>\\n\\n    <ion-title>\\n\\n\\n    </ion-title>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>  \\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"card-outline\\\"></ion-icon>\\n      <ion-label class=\\\"planactual\\\"> Su Plan actual</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"calendar-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">07/04/2020</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Expira en</label>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"today-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">12 Días</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Días restantes</label>\\n        </ion-col>   \\n      </ion-row>    \\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"barcode-outline\\\"></ion-icon>\\n      <ion-label>Renovar con licencia</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <form (ngSubmit)=\\\"tokenCheck(frenewal)\\\" #frenewal=\\\"ngForm\\\">  \\n        <ion-row>          \\n            <ion-col size=\\\"8\\\">\\n              <ion-input name=\\\"lic\\\"  placeholder=\\\"Ingrese licencia\\\" [(ngModel)]=\\\"renewalLic.lic\\\" required></ion-input>\\n            </ion-col>\\n            <ion-col size=\\\"2\\\">\\n              <ion-button type=\\\"submit\\\"  color=\\\"warning\\\">Verificar</ion-button>\\n            </ion-col>          \\n        </ion-row>\\n      </form>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"power-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">{{ state }}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Estado</label>\\n        </ion-col>\\n        <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"today-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label  \\\">{{days}}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Días del plan</label>\\n        </ion-col>   \\n      </ion-row>\\n      <ion-row>\\n      <ion-col size=\\\"6\\\">\\n          <ion-icon name=\\\"phone-portrait-outline\\\" class=\\\"icons-page\\\" color=\\\"warning\\\"></ion-icon>\\n          <label for=\\\"\\\" class=\\\"primary-label\\\" >{{ plan }}</label><br>\\n          <label for=\\\"\\\" class=\\\"secundary-label\\\">Plan</label>\\n        </ion-col>\\n      </ion-row>\\n      <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" color=\\\"warning\\\" (click)=\\\"renewal()\\\">Renovar Licencia</ion-button>   \\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"logo-bitcoin\\\"></ion-icon>\\n      <ion-label>Pago con Bitcoin</ion-label>      \\n    </ion-item>  \\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n          <label class=\\\"wallet\\\">hawoeHGj7152nhGEpoO0</label><br>\\n          <label class=\\\"labelwallet\\\">Click en la wallet para copiarla</label>\\n        </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <label for=\\\"\\\">Espacio para codigo QR</label>\\n        </ion-row>\\n        <ion-row>       \\n      </ion-row>    \\n    </ion-card-content>\\n  </ion-card>\\n\\n  \\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RenewalPage } from './renewal.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RenewalPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RenewalPage]\n})\nexport class RenewalPageModule {}\n","export default \".icons-page {\\n  margin-left: -5px;\\n  margin-right: 3px;\\n  width: 20px;\\n  height: 20px; }\\n\\n.primary-label {\\n  color: #000000;\\n  margin-top: 2px; }\\n\\n.secundary-label {\\n  font-size: 12px;\\n  color: grey;\\n  margin-left: 18px;\\n  margin-top: 0px; }\\n\\n.wallet {\\n  color: black;\\n  text-align: center; }\\n\\n.labelwallet {\\n  font-size: 12px; }\\n\\n.planactual {\\n  margin-left: 3px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVuZXdhbC9DOlxcVXNlcnNcXE5lbWVzc2lzXFxEZXNrdG9wXFxwdjJcXGZyb250XFxjb3JlXFxmc3Uvc3JjXFxhcHBcXHBhZ2VzXFxyZW5ld2FsXFxyZW5ld2FsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsV0FBVztFQUNYLFlBQVksRUFBQTs7QUFHaEI7RUFDSSxjQUFjO0VBQ2QsZUFBZSxFQUFBOztBQUduQjtFQUNJLGVBQWU7RUFDZixXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLGVBQWUsRUFBQTs7QUFHbkI7RUFDSSxZQUFZO0VBQ1osa0JBQWtCLEVBQUE7O0FBR3RCO0VBQ0ksZUFBZSxFQUFBOztBQUduQjtFQUNJLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcmVuZXdhbC9yZW5ld2FsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29ucy1wYWdle1xyXG4gICAgbWFyZ2luLWxlZnQ6IC01cHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDNweDtcclxuICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG59XHJcblxyXG4ucHJpbWFyeS1sYWJlbHtcclxuICAgIGNvbG9yOiAjMDAwMDAwO1xyXG4gICAgbWFyZ2luLXRvcDogMnB4O1xyXG59XHJcblxyXG4uc2VjdW5kYXJ5LWxhYmVse1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgY29sb3I6IGdyZXk7XHJcbiAgICBtYXJnaW4tbGVmdDogMThweDtcclxuICAgIG1hcmdpbi10b3A6IDBweDtcclxufVxyXG5cclxuLndhbGxldHtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmxhYmVsd2FsbGV0e1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4ucGxhbmFjdHVhbHtcclxuICAgIG1hcmdpbi1sZWZ0OiAzcHg7XHJcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\n\nimport { TokenService } from '../../services/tokens.service';\nimport { ToastController } from '@ionic/angular';\n\nimport { Storage } from '@ionic/storage';\nimport { UsersService } from '../../services/users.service';\n\n@Component({\n  selector: 'app-renewal',\n  templateUrl: './renewal.page.html',\n  styleUrls: ['./renewal.page.scss'],\n})\nexport class RenewalPage implements OnInit {\n\n  renewalLic = {\n    lic : ''\n  }\n  characters ;\n  stateToken;\n  state = ' - ';\n  idPlan;\n  plan='';\n  infoToken;\n  days;\n\n  username;\n  userid;\n\n  dataRenewal = {\n      userid : '',\n      expire : ''\n  }\n\n\n  constructor(private tService : TokenService,\n              private toastCtrl: ToastController,\n              private storage: Storage,\n              private userService: UsersService\n              ) { }\n\n  ngOnInit() {\n  }\n\n  renewal(frenewal: NgForm){\n    console.log('FORMULARIO INGRESA', this.renewalLic.lic);\n    console.log('Dias del plan ', this.days);    \n    this.storage.get('username').then((result)=>{\n      this.username = result;\n      this.userService.getSekretId(this.username).subscribe( response=>{\n        this.userid = response.user[0]._id;\n        console.log('ID del usuario qeu va a renovar la licencia', this.userid);\n\n        let datNow = new Date();\n        console.log('hoy', datNow);\n        datNow.setDate(datNow.getDate() + this.days);\n        let newDateSum = datNow.getFullYear() + '-' + (datNow.getMonth() + 1 ) + '-' + datNow.getDate() + '-';        \n        console.log('NUEVA FECHA SUMADA', newDateSum);\n\n        this.dataRenewal = {\n          userid : this.userid,\n          expire : newDateSum\n      }\n      this.userService.renewalLisence(this.dataRenewal).subscribe(resp => {\n        console.log('Respuesta renovacion', response);\n      });\n\n\n      })\n    });    \n  }\n\n  tokenCheck(frenewal: NgForm){\n   // console.log('FORMULARIO INGRESA', this.renewalLic.lic);\n    \n    this.characters = this.renewalLic.lic.length;\n    if (this.characters === 20) {\n      this.tService.getVerifyToken(this.renewalLic.lic).subscribe(resp => {\n        console.log('RESPUESTA DEL TOKEN INGRESADO',resp);\n        if ( Object.entries(resp.tokens).length === 0) {\n          this.presentToast('El tocken ingresado no existe');    \n          \n        }else{\n          this.presentToast('El tocken se encuentra disponible');    \n          this.idPlan = resp.tokens[0].idplan;\n          this.stateToken =  resp.tokens[0].state;\n          if (this.stateToken === '1') {\n            this.state = 'Disponible';\n          }else{\n            this.state = 'No disponible'\n          }\n          this.tService.getRemainingDays(this.idPlan).subscribe(respPlan => {\n            this.infoToken = respPlan.plans[0] ;\n            this.plan = this.infoToken.type;\n            this.days = this.infoToken.timetoexpire;\n          })\n        }\n      })\n    }else{\n      this.presentToast('El tocken No esta registrado');\n    }\n  }\n\n\n\n  async presentToast(message: string) {\n    const toast = await this.toastCtrl.create({\n      message,\n      duration: 2000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n}// END class\n"],"sourceRoot":"webpack:///"}