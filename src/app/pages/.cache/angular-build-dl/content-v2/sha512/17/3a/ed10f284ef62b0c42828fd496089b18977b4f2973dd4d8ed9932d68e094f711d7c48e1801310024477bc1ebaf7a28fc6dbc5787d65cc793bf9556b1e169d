{"version":3,"sources":["src/app/pages/trunk/trunk.page.html","src/app/pages/trunk/trunk.module.ts","src/app/pages/trunk/trunk.page.scss","src/app/pages/trunk/trunk.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,0jCAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACUf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,wCAAA,CAAA,WAAA;AAFb,KADqB,CAAvB;;AAiBA,QAAa,eAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,eAAe,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAV3B,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CAJO,EAKP,gDAAA,CAAA,iBAAA,CALO,CADD;AAQR,MAAA,YAAY,EAAE,CAAC,wCAAA,CAAA,WAAA,CAAD;AARN,KAAT,CAU2B,CAAA,EAAf,eAAe,CAAf;;;;;;;;;;;;;;;;AC3Bb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,w2CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiBf,QAAa,SAAb;AAYE,yBAAoB,eAApB,EACoB,OADpB,EAEoB,WAFpB,EAGoB,YAHpB,EAIoB,MAJpB,EAKoB,eALpB,EAMoB,QANpB,EAMsC;AAAA;;AAAA;;AANlB,aAAA,eAAA,GAAA,eAAA;AACA,aAAA,OAAA,GAAA,OAAA;AACA,aAAA,WAAA,GAAA,WAAA;AACA,aAAA,YAAA,GAAA,YAAA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,eAAA,GAAA,eAAA;AACA,aAAA,QAAA,GAAA,QAAA;AARpB,aAAA,aAAA,GAAgB,EAAhB;AASc,QAAA,QAAQ,CAAC,KAAT,GAAiB,IAAjB,CAAsB,YAAK;AACzB,UAAA,KAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,SAApB,CAA8B,YAAK,CACnC;AACC,WAFD;;AAGA,UAAA,KAAI,CAAC,QAAL,CAAc,MAAd,CAAqB,SAArB,CAA+B,YAAK;AAClC,YAAA,OAAO,CAAC,GAAR,CAAY,oBAAZ;AACD,WAFD;AAGD,SAPD;AAQA;;AA3BhB;AAAA;AAAA,mCA6BU;AAAA;;AACN,eAAK,IAAL,GAAY,KAAK,OAAL,CAAa,GAAb,CAAiB,UAAjB,EAA6B,IAA7B,CAAkC,UAAC,MAAD,EAAU;AACtD,YAAA,MAAI,CAAC,WAAL,GAAmB,MAAnB;;AACA,YAAA,MAAI,CAAC,WAAL,CAAiB,WAAjB,CAA6B,MAAI,CAAC,WAAlC,EAA+C,SAA/C,CAA0D,UAAA,QAAQ,EAAE;AAClE,cAAA,MAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,QAApC;AACA,cAAA,MAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,GAA/B;;AACA,cAAA,MAAI,CAAC,YAAL,CAAkB,eAAlB,CAAkC,MAAI,CAAC,MAAvC,EAA+C,SAA/C,CAAyD,UAAA,GAAG,EAAE;AAC5D,gBAAA,MAAI,CAAC,MAAL,GAAc,GAAG,CAAC,MAAlB;AACD,eAFD;AAGD,aAND;AAOD,WATW,CAAZ;AAYA,eAAK,kBAAL;AACD;AA3CH;AAAA;AAAA,iCA6CQ;AACJ,UAAA,OAAO,CAAC,GAAR,CAAY,kBAAZ;AACA,eAAK,MAAL,CAAY,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD;AAhDH;AAAA;AAAA,gCAkDU,MAlDV,EAkDgB;AAAA;;AACZ,eAAK,WAAL,CAAiB,eAAjB,CAAiC,MAAjC,EAAyC,SAAzC,CAAmD,UAAA,QAAQ,EAAG;AAC5D,YAAA,MAAI,CAAC,UAAL,GAAkB,QAAQ,CAAC,IAAT,CAAc,CAAd,CAAlB;AACA,YAAA,MAAI,CAAC,QAAL,GAAgB,MAAI,CAAC,UAAL,CAAgB,QAAhC;AACA,YAAA,OAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,MAAI,CAAC,QAA7B;AACD,WAJD;AAKA,iBAAO,KAAK,QAAZ;AACD;AAzDH;AAAA;AAAA,mCA2Da,KA3Db,EA2DkB;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,KAAxB;AAED;AA9DH;AAAA;AAAA,oCAiEoB,KAjEpB,EAiEyB;;;;;;;;;;AAEL,2BAAM,KAAK,eAAL,CAAqB,MAArB,CAA4B;AAC9C,sBAAA,QAAQ,EAAE,iBADoC;AAE9C,sBAAA,MAAM,EAAE,WAFsC;AAG9C,sBAAA,OAAO,EAAE,kDAHqC;AAI9C,sBAAA,OAAO,EAAE,CACP;AACE,wBAAA,IAAI,EAAE,UADR;AAEE,wBAAA,IAAI,EAAE,QAFR;AAGE,wBAAA,QAAQ,EAAE,WAHZ;AAIE,wBAAA,OAAO,EAAE,iBAAC,IAAD,EAAS;AAChB,0BAAA,OAAO,CAAC,GAAR,CAAY,sBAAZ;AACD;AANH,uBADO,EAQJ;AACD,wBAAA,IAAI,EAAE,SADL;AAED,wBAAA,OAAO,EAAE,mBAAK;AACZ,0BAAA,MAAI,CAAC,YAAL,CAAkB,WAAlB,CAA8B,KAA9B,EAAqC,SAArC,CAA+C,UAAA,GAAG,EAAG;AACnD,4BAAA,OAAO,CAAC,GAAR,CAAY,iCAAZ,EAA8C,GAA9C;;AACA,4BAAA,MAAI,CAAC,QAAL;AACD,2BAHD;AAID;AAPA,uBARI;AAJqC,qBAA5B,CAAN;;;AAAR,oBAAA,K;;AAwBN,2BAAM,KAAK,CAAC,OAAN,EAAN;;;;;;;;;AACD;AA5FL;AAAA;AAAA,6CAgG0B;;;;;;;;;;AACR,2BAAM,KAAK,eAAL,CAAqB,MAArB,CAA4B;AAC9C,sBAAA,QAAQ,EAAE,MADoC;AAE9C,sBAAA,MAAM,EAAE,qBAFsC;AAG9C,sBAAA,OAAO,4DAHuC;AAI9C,sBAAA,SAAS,gCAJqC;AAK9C,sBAAA,MAAM,EAAE,CACN;AACE,wBAAA,IAAI,EAAE,UADR;AAEE,wBAAA,IAAI,EAAE,UAFR;AAGE,wBAAA,WAAW,EAAE;AAHf,uBADM,CALsC;AAa9C,sBAAA,OAAO,EAAE,CAEP;AACE,wBAAA,IAAI,EAAE,UADR;AAEE,wBAAA,IAAI,EAAE,QAFR;AAGE,wBAAA,QAAQ,EAAE,WAHZ;AAIE,wBAAA,OAAO,EAAE,iBAAC,SAAD,EAAc;AACrB,0BAAA,OAAO,CAAC,GAAR,CAAY,gBAAZ;;AACA,0BAAA,MAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,CAAC,WAAD,CAArB;AACD;AAPH,uBAFO,EAUJ;AACD,wBAAA,IAAI,EAAE,UADL;AAED,wBAAA,OAAO,EAAE,iBAAC,SAAD,EAAc;AACrB,0BAAA,OAAO,CAAC,GAAR,CAAY,YAAZ,EAA0B,SAAS,CAAC,QAApC;;AACA,0BAAA,MAAI,CAAC,eAAL,CAAqB,SAAS,CAAC,QAA/B;AACD;AALA,uBAVI;AAbqC,qBAA5B,CAAN;;;AAAR,oBAAA,K;;AAiCN,2BAAM,KAAK,CAAC,OAAN,EAAN;;;;;;;;;AACD;AAnIH;AAAA;AAAA,wCAqIwB,IArIxB,EAqI4B;;;;;;;;AACR,2BAAM,KAAK,WAAL,CAAiB,eAAjB,CAAiC,KAAK,MAAtC,EAA8C,IAA9C,CAAN;;;AAAT,oBAAA,K;;AACP,wBAAI,KAAJ,EAAW;AACT,sBAAA,OAAO,CAAC,GAAR,CAAY,gCAAZ,EAA6C,KAA7C;AACD;;;;;;;;;AACF;AA1IH;;AAAA;AAAA,OAAA;;;;cAYuC,8DAAA,CAAA,iBAAA;;cACR,2CAAA,CAAA,SAAA;;cACI,oDAAA,CAAA,cAAA;;cACC,2DAAA,CAAA,cAAA;;cACN,4CAAA,CAAA,QAAA;;cACS,2CAAA,CAAA,iBAAA;;cACP,2CAAA,CAAA,UAAA;;;;AAlBnB,IAAA,SAAS,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CALrB,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,WADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,mFAAA,CAAA,YAFS;;;;AAAA,KAAV,CAKqB,E,uEAYiB,8DAAA,CAAA,iBAAA,C,EACR,2CAAA,CAAA,SAAA,C,EACI,oDAAA,CAAA,cAAA,C,EACC,2DAAA,CAAA,cAAA,C,EACN,4CAAA,CAAA,QAAA,C,EACS,2CAAA,CAAA,iBAAA,C,EACP,2CAAA,CAAA,UAAA,C,EAlBV,CAAA,EAAT,SAAS,CAAT","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"warning\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/contacts\\\" icon-only></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{'TRUNK.title' | translate}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-list>\\r\\n    <ion-item-sliding *ngFor=\\\"let el of trunks\\\" >      \\r\\n      <ion-item >\\r\\n      <ion-avatar slot=\\\"start\\\" [routerLink]=\\\"['/trunk-chat', el._id ]\\\">\\r\\n          <img src=\\\"../../../assets/avatars/lock.png\\\">\\r\\n        </ion-avatar>\\r\\n        <ion-label class=\\\"sc-ion-label-ios-h sc-ion-label-ios-s ios hydrated\\\" [routerLink]=\\\"['/trunk-chat', el._id ]\\\">\\r\\n          <h3 class=\\\"nameUser\\\">{{ el.receiverName }}</h3>\\r\\n          <p>{{el.createAt | date:'short' }}</p>         \\r\\n        </ion-label>\\r\\n        <ion-button color=\\\"danger\\\" slot=\\\"end\\\" (click)=\\\"alertDelete(el._id)\\\">{{'TRUNK.delete' | translate}}</ion-button>\\r\\n      </ion-item>  \\r\\n      \\r\\n      \\r\\n    </ion-item-sliding>\\r\\n  </ion-list>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TrunkPage } from './trunk.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TrunkPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule\r\n  ],\r\n  declarations: [TrunkPage]\r\n})\r\nexport class TrunkPageModule {}\r\n","export default \".ssl {\\n  width: 25%;\\n  height: 70%;\\n  margin-left: 37%;\\n}\\n\\n.nameUser {\\n  font-weight: bold;\\n}\\n\\n.mdal {\\n  align-content: center;\\n  text-align: center;\\n  font-size: 18px;\\n  color: #000000;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdHJ1bmsvQzpcXFVzZXJzXFxOZW1lc3Npc1xcRGVza3RvcFxccHJvamVjdHNcXGp1bmlvXFxmc3UgLSBDb3B5L3NyY1xcYXBwXFxwYWdlc1xcdHJ1bmtcXHRydW5rLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvdHJ1bmsvdHJ1bmsucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksVUFBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQTtBQ0NKOztBREVBO0VBQ0ksaUJBQUE7QUNDSjs7QURFQTtFQUNJLHFCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdHJ1bmsvdHJ1bmsucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNzbHtcclxuICAgIHdpZHRoOiAyNSU7XHJcbiAgICBoZWlnaHQ6IDcwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiAzNyU7XHJcbn1cclxuXHJcbi5uYW1lVXNlcntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4ubWRhbHtcclxuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIGNvbG9yOiAjMDAwMDAwO1xyXG59IiwiLnNzbCB7XG4gIHdpZHRoOiAyNSU7XG4gIGhlaWdodDogNzAlO1xuICBtYXJnaW4tbGVmdDogMzclO1xufVxuXG4ubmFtZVVzZXIge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLm1kYWwge1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBjb2xvcjogIzAwMDAwMDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ContactsService } from 'src/app/services/contacts.service';\r\nimport { Storage } from '@ionic/storage';\r\nimport { UsersService } from '../../services/users.service';\r\nimport { contactsCard,  } from '../../interfaces/contactsInterfaces';\r\nimport { RespTrunk } from '../../interfaces/trunkInterface'\r\nimport { TrunkService } from 'src/app/services/trunk.service'\r\nimport { Router } from '@angular/router';\r\nimport { Dialogs } from '@ionic-native/dialogs/ngx';\r\nimport { AlertController, Platform } from '@ionic/angular';\r\n\r\n\r\n@Component({\r\n  selector: 'app-trunk',\r\n  templateUrl: './trunk.page.html',\r\n  styleUrls: ['./trunk.page.scss'],\r\n})\r\nexport class TrunkPage implements OnInit {\r\n  args;\r\n  userStorage;\r\n  sekretidrec;\r\n  contacts;\r\n  idUser;\r\n  trunks;\r\n  objectUser;\r\n  username;\r\n\r\n  passwordTrunk = '';\r\n\r\n  constructor(private contactsService: ContactsService,\r\n              private storage: Storage,\r\n              private userService: UsersService,\r\n              private TrunkService: TrunkService,\r\n              private router: Router,\r\n              private alertController: AlertController,\r\n              private platform: Platform,) {\r\n                platform.ready().then(() => {\r\n                  this.platform.pause.subscribe(() => {\r\n                  //  this.logout();\r\n                  });\r\n                  this.platform.resume.subscribe(() => {\r\n                    console.log('[INFO] App resumed');\r\n                  });\r\n                })\r\n               }\r\n\r\n  ngOnInit() {    \r\n    this.args = this.storage.get('username').then((result)=>{\r\n      this.userStorage = result;      \r\n      this.userService.getSekretId(this.userStorage).subscribe( response=>{  \r\n        this.sekretidrec = response.user[0].sekretid;  \r\n        this.idUser = response.user[0]._id;        \r\n        this.TrunkService.getTrunksbyUser(this.idUser).subscribe(res=>{          \r\n          this.trunks = res.trunks;\r\n        });\r\n      });\r\n    });\r\n\r\n\r\n    this.presentAlertPrompt();\r\n  }\r\n  \r\n  logout() {\r\n    console.log(\"Logging out user\");\r\n    this.router.navigate(['/home']);\r\n  }\r\n\r\n  getName(idUser){\r\n    this.userService.getusernameById(idUser).subscribe(response => {      \r\n      this.objectUser = response.user[0];\r\n      this.username = this.objectUser.username;\r\n      console.log('#$#$#$#$', this.username);    \r\n    });\r\n    return this.username\r\n  }\r\n \r\n  deletTrunk(param){\r\n    console.log('ELIMINAR', param);\r\n\r\n  }\r\n\r\n\r\n  async alertDelete(param){\r\n     \r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        header: 'Atención!',\r\n        message: '¿Está seguro que desea eliminar la conversación?',\r\n        buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            role: 'cancel',\r\n            cssClass: 'secondary',\r\n            handler: (blah) => {\r\n              console.log('Confirm Cancel: blah');\r\n            }\r\n          }, {\r\n            text: 'Aceptar',\r\n            handler: () => {\r\n              this.TrunkService.deleteTrunk(param).subscribe(res => {\r\n                console.log('Respuesta del servicio eliminar',res);\r\n                this.ngOnInit();\r\n              })\r\n            }\r\n          }\r\n        ]\r\n      });\r\n  \r\n      await alert.present();\r\n    }\r\n\r\n\r\n    \r\n  async presentAlertPrompt() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'mdal',\r\n      header: 'Ingresar contraseña',\r\n      message: `<img src=\"assets/safe2.png\" alt=\"g-maps\" style=\"\">`,\r\n      subHeader: `Puede asignarla en el perfil`,\r\n      inputs: [\r\n        {\r\n          name: 'password',\r\n          type: 'password',\r\n          placeholder: 'Contraseña del baúl'\r\n        }\r\n      ],\r\n      \r\n      buttons: [\r\n     \r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (alertData) => {\r\n            console.log('Confirm Cancel');\r\n            this.router.navigate(['/contacts']);\r\n          }\r\n        }, {\r\n          text: 'Ingresar',\r\n          handler: (alertData) => {\r\n            console.log('Confirm Ok', alertData.password);\r\n            this.loginsecondPass(alertData.password)\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async loginsecondPass(pass){\r\n    const  valid =  await this.userService.loginSecondPass(this.idUser, pass);\r\n    if (valid) {\r\n      console.log('VALIDACION DE SEGUNDO PASSWORD',valid );\r\n    }\r\n  }\r\n\r\n  \r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"pages-trunk-trunk-module-es5.js"}