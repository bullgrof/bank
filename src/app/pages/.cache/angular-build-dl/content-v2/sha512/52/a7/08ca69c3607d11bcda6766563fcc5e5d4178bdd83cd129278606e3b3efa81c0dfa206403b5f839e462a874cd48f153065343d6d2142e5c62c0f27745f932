{"version":3,"sources":["./src/app/pages/callreply/callreply.page.html","./src/app/pages/callreply/callreply.module.ts","./src/app/pages/callreply/callreply.page.scss","./src/app/pages/callreply/callreply.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,kKAAmG,2DAA2D,YAAY,WAAW,YAAY,iLAAiL,WAAW,YAAY,YAAY,ueAAue,0DAA0D,YAAY,WAAW,YAAY,qKAAqK,+FAA+F,oGAAoG,WAAW,YAAY,YAAY,8QAA8Q,+FAA+F,6HAA6H,qFAAqF,wgB;;;;;;;;;;;;;;;;;;;;;;ACAz4D;AACM;AACF;AACU;AAEV;AAEI;AAEjD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,6DAAa;KACzB;CACF,CAAC;AAWF,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;CAAG;AAAtB,mBAAmB;IAT/B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,6DAAa,CAAC;KAC9B,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;ACzBhC;AAAe,4EAAa,uBAAuB,eAAe,iBAAiB,qBAAqB,eAAe,GAAG,iBAAiB,gBAAgB,oBAAoB,GAAG,iBAAiB,mCAAmC,GAAG,aAAa,gBAAgB,iBAAiB,GAAG,cAAc,gBAAgB,GAAG,6CAA6C,2hD;;;;;;;;;;;;;;;;;;;;;ACA1S;AACL;AACG;AACE;AACE;AAOhE,IAAa,aAAa,GAA1B,MAAa,aAAa;IAwBxB,YACU,cAA+B,EAC/B,MAAc,EACf,KAAiB,EACjB,MAAqB,EACpB,WAA0B,EAC1B,WAAyB;QALzB,mBAAc,GAAd,cAAc,CAAiB;QAC/B,WAAM,GAAN,MAAM,CAAQ;QACf,UAAK,GAAL,KAAK,CAAY;QACjB,WAAM,GAAN,MAAM,CAAe;QACpB,gBAAW,GAAX,WAAW,CAAe;QAC1B,gBAAW,GAAX,WAAW,CAAc;QA5BnC,kBAAa,GAAG,eAAe,CAAC;QAchC,eAAU,GAAG;YACX,IAAI,EAAE,EAAE;YACR,KAAK,EAAE,EAAE;YACT,SAAS,EAAE,EAAE;YACb,GAAG,EAAE,EAAE;SACR;IAUG,CAAC;IAEL,QAAQ;QACN,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC;QACjD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,6CAA6C,EAAE,IAAI,CAAC,OAAO,CAAE,CAAC;QAC1E,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5B,2BAA2B;QAE1B,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;QAC5D,4BAA4B;QAC5B,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE;YAC/E,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC;YAEzC,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC5C,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAE;YAC5D,0CAA0C;YACzC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAClD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;YACtD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YAEtC,IAAI,CAAC,UAAU,GAAG;gBAChB,IAAI,EAAE,IAAI,CAAC,KAAK;gBAChB,KAAK,EAAE,IAAI,CAAC,aAAa;gBACzB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,GAAG,EAAE,IAAI,CAAC,QAAQ;aACnB;YACD,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC;YACxD,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,MAAM,GAAE;gBACrE,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAC,MAAM,EAAC,qBAAqB,CAAC,CAAC;YAClE,CAAC,CAAC;QACJ,CAAC,CAAC;QACF,6BAA6B;IAC/B,CAAC;IAED,IAAI;QACF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;QAC1E,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAC3D,CAAC;IAED,KAAK,CAAC,SAAS;QACb,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAChE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;QAC1E,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IACzD,CAAC;IAGD,MAAM,CAAC,MAAM;QACX,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,UAAU,GAAG,gEAAgE,CAAC;QAClF,IAAI,gBAAgB,GAAG,UAAU,CAAC,MAAM,CAAC;QACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/B,MAAM,IAAI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;gBAClD,gBAAgB,CAAC,CAAC,CAAC;SACtB;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAGD,IAAI,CAAC,eAAe;QAClB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAClC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC7B,CAAC;IAED,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACvD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC7B,CAAC;IAED,SAAS,CAAC,QAAgB;QACxB,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;IAChC,CAAC;IAED,OAAO;QACL,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;IACtC,CAAC;CAGF;;YAzF4B,8DAAc;YACvB,sDAAM;YACR,wDAAU;YACT,6EAAa;YACN,2EAAY;YACZ,yEAAW;;AA9BxB,aAAa;IALzB,+DAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,2NAAoC;;KAErC,CAAC;2EA0B2B,8DAAc;QACvB,sDAAM;QACR,wDAAU;QACT,6EAAa;QACN,2EAAY;QACZ,yEAAW;GA9BxB,aAAa,CAkHzB;AAlHyB","file":"pages-callreply-callreply-module-es2015.js","sourcesContent":["export default \"<ion-content class=\\\"bgcolor\\\">\\n  <div id=\\\"errorMsg\\\"></div>\\n  <div style=\\\"position: relative;\\\" class=\\\"bgcolor\\\">\\n    <div style=\\\"position: absolute; left: 10px; top: 25px; z-index: 1;\\\">\\n      <video id=\\\"partner-video\\\" (click)=\\\"swapVideo('my-video')\\\" autoplay playsinline class=\\\"mvideo\\\">\\n      </video>\\n    </div>\\n    <div style=\\\"position: absolute; left: 80%; top: 450px; z-index: 3;\\\">\\n      <video id=\\\"my-video\\\" (click)=\\\"swapVideo('partner-video')\\\" autoplay playsinline class=\\\"mvideoa\\\">\\n      </video>\\n    </div>\\n\\n  </div>\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"center\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button color=\\\"danger\\\" (click)=\\\"endCall()\\\">\\n      <ion-icon name=\\\"call\\\" class=\\\"rotate\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n\\n\\n<!--ion-content>\\n  <div id=\\\"errorMsg\\\"></div>\\n  <div style=\\\"position: relative;\\\" class=\\\"bcolor\\\">\\n    <div style=\\\"position: absolute; left: 10px; top: 25px; z-index: 1;\\\">\\n      <video id=\\\"partner-video\\\" \\n             (click)=\\\"swapVideo('my-video')\\\" \\n             autoplay \\n             playsinline\\n            [ngClass]=\\\"{'top-video': topVideoFrame === 'partner-video', 'main-video': topVideoFrame != 'partner-video'}\\\" \\n            class=\\\"mvideo\\\">\\n      </video>\\n    </div>\\n    <div style=\\\"position: absolute; left: 80%; top: 450px; z-index: 3;\\\">\\n      <video id=\\\"my-video\\\" (click)=\\\"swapVideo('partner-video')\\\" autoplay playsinline class=\\\"mvideoa\\\">\\n      </video>\\n    </div>\\n\\n  </div>\\n\\n\\n\\n\\n\\n\\n<!--video id=\\\"partner-video\\\" (click)=\\\"swapVideo('my-video')\\\" autoplay playsinline\\n    [ngClass]=\\\"{'top-video': topVideoFrame === 'partner-video', 'main-video': topVideoFrame != 'partner-video'}\\\">\\n  </video-->\\n  <!--video id=\\\"my-video\\\" (click)=\\\"swapVideo('partner-video')\\\" autoplay playsinline\\n    [ngClass]=\\\"{'top-video': topVideoFrame === 'my-video', 'main-video': topVideoFrame != 'my-video'}\\\" >\\n  </video-->\\n\\n  <!--ion-row nowrap>\\n    <ion-button (click)=\\\"inita()\\\">Login As: </ion-button>\\n    <ion-item>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userId\\\" placeholder=\\\"enter your nick name\\\"></ion-input>\\n    </ion-item>\\n  </ion-row>\\n\\n  <ion-row nowrap>\\n    <ion-button (click)=\\\"calla()\\\">Call To: </ion-button>\\n    <ion-item>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"partnerId\\\" placeholder=\\\"your partner nick name\\\"></ion-input>\\n    </ion-item>\\n  </ion-row>  \\n\\n</ion-content-->\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CallreplyPage } from './callreply.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CallreplyPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CallreplyPage]\n})\nexport class CallreplyPageModule {}\n","export default \".top-video {\\n  position: absolute;\\n  top: 100px;\\n  right: 100px;\\n  max-width: 100px;\\n  z-index: 2;\\n}\\n\\n.main-video {\\n  width: 100%;\\n  max-height: 70%;\\n}\\n\\nion-content {\\n  --ion-background-color:#111D12;\\n}\\n\\n.mvideo {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.mvideoa {\\n  width: 65px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2FsbHJlcGx5L0M6XFxVc2Vyc1xcTmVtZXNzaXNcXERlc2t0b3BcXHByb2plY3RzXFxwdGVjaFxcdGVzdFxcYmFuY28vc3JjXFxhcHBcXHBhZ2VzXFxjYWxscmVwbHlcXGNhbGxyZXBseS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NhbGxyZXBseS9jYWxscmVwbHkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxVQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EsVUFBQTtBQ0NKOztBREVBO0VBQ0ksV0FBQTtFQUNBLGVBQUE7QUNDSjs7QURHQTtFQUNJLDhCQUFBO0FDQUo7O0FESUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQ0RKOztBREtBO0VBQ0ksV0FBQTtBQ0ZKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2FsbHJlcGx5L2NhbGxyZXBseS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudG9wLXZpZGVve1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAxMDBweDtcclxuICAgIHJpZ2h0OiAxMDBweDtcclxuICAgIG1heC13aWR0aDogMTAwcHg7XHJcbiAgICB6LWluZGV4OiAyO1xyXG59XHJcblxyXG4ubWFpbi12aWRlb3tcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgbWF4LWhlaWdodDogNzAlO1xyXG59XHJcblxyXG5cclxuaW9uLWNvbnRlbnR7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiMxMTFEMTI7XHJcbiAgfVxyXG5cclxuICBcclxuLm12aWRlb3tcclxuICAgIHdpZHRoOjEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcblxyXG4ubXZpZGVvYXtcclxuICAgIHdpZHRoOiA2NXB4O1xyXG4gICAgXHJcbn1cclxuIiwiLnRvcC12aWRlbyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxMDBweDtcbiAgcmlnaHQ6IDEwMHB4O1xuICBtYXgtd2lkdGg6IDEwMHB4O1xuICB6LWluZGV4OiAyO1xufVxuXG4ubWFpbi12aWRlbyB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtaGVpZ2h0OiA3MCU7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjojMTExRDEyO1xufVxuXG4ubXZpZGVvIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLm12aWRlb2Ege1xuICB3aWR0aDogNjVweDtcbn0iXX0= */\"","import { Component, OnInit, ElementRef } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PushService } from 'src/app/services/push.service';\nimport { UsersService } from 'src/app/services/users.service';\nimport { WebrtcService } from 'src/app/services/webrtc.service';\n\n@Component({\n  selector: 'app-callreply',\n  templateUrl: './callreply.page.html',\n  styleUrls: ['./callreply.page.scss'],\n})\nexport class CallreplyPage implements OnInit {\n  partner;\n  topVideoFrame = 'partner-video';\n  userId: string;\n  partnerId: string;\n  myEl: HTMLMediaElement;\n  partnerEl: HTMLMediaElement;\n  myPartner;\n  callerId;\n  \n  /*VARS CONTROOL */\n  arrayContact;\n  usernameContact;\n  notiIdContact;\n  appid;\n\n  notificate = {\n    apid: '',\n    notid: '',\n    partnerId: '',\n    sid: ''\n  }\n\n\n  constructor(\n    private activatedRoute : ActivatedRoute,\n    private router: Router,\n    public elRef: ElementRef,\n    public webRTC: WebrtcService,\n    private userService : UsersService,\n    private PushService : PushService\n  ) { }\n\n  ngOnInit() {\n    console.log('????????? PASOOOOOO ??????????????')\n    this.partner = this.activatedRoute.snapshot.paramMap.get('par');\n    console.log('99999999 PASO A RESPONDER LLAMADA 999999999', this.partner );\n    this.myPartner = this.makeid(10);\n    this.inita(this.myPartner);\n   // this.call(this.partner);\n    \n    console.log('** *** ** ', this.partner, '++ +++ ++ +++ ++');\n    /* CREATE AN NOTIFICATION */\n    this.userService.getUserNameBySekretId(this.partner).subscribe(responseContact => {\n      console.log('ID QUE BUSCO', this.partner)\n      \n      this.arrayContact = responseContact.user[0];\n      console.log('ID QUE ENCUENTRO',this.arrayContact.sekretid )\n     // this.idContact = this.arrayContact._id;\n      this.usernameContact = this.arrayContact.username;\n      this.notiIdContact = this.arrayContact.notificationId;\n      this.appid = this.arrayContact.appidn;\n\n      this.notificate = { \n        apid: this.appid,\n        notid: this.notiIdContact,\n        partnerId: this.myPartner,\n        sid: this.callerId\n      }\n      console.log('- - - - - - - - - - - - - - - - - - - - -')\n      this.PushService.sendPushRepplyCall(this.notificate).subscribe(rsPush=>{\n        console.log('..:::..:::..::..:::',rsPush,':::..:::..:::..::::');\n      })\n    })\n    /* END CREATE NOTIFICATION */\n  }\n\n  init() {\n    this.myEl = this.elRef.nativeElement.querySelector('#my-video');\n    this.partnerEl = this.elRef.nativeElement.querySelector('#partner-video');\n    this.webRTC.init(this.userId, this.myEl, this.partnerEl);\n  }\n\n  inita(partnerMy) {\n    console.log('==== USUARIO QUE INICIA', this.userId);\n    this.myEl = this.elRef.nativeElement.querySelector('#my-video');\n    this.partnerEl = this.elRef.nativeElement.querySelector('#partner-video');\n    this.webRTC.init(partnerMy, this.myEl, this.partnerEl);\n  }\n\n\n  makeid(length) {\n    let result = '';\n    let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() *\n        charactersLength));\n    }\n    return result;\n  }\n\n  \n  call(partnerIncoming) {\n    this.webRTC.call(partnerIncoming);\n    this.swapVideo('my-video');\n  }\n\n  calla() {\n    console.log('***** USUARIO QUE LLAMA', this.partnerId);\n    this.webRTC.call(this.partnerId);\n    this.swapVideo('my-video');\n  }\n\n  swapVideo(topVideo: string) {\n    this.topVideoFrame = topVideo;\n  }\n\n  endCall(){\n    this.webRTC.closeCall();\n    this.router.navigate(['/contacts']);\n  }\n\n\n}\n"],"sourceRoot":"webpack:///"}