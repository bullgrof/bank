{"version":3,"sources":["src/app/pages/change-password/change-password.page.html","src/app/pages/change-password/change-password.module.ts","src/app/pages/change-password/change-password.page.scss","src/app/pages/change-password/change-password.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"warning\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/contacts\\\" icon-only></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title> {{'CHANGEPASSWORD.title' | translate}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-card >\\r\\n    <img src=\\\"../../../assets/ssl.png\\\" class=\\\"ssl\\\">      \\r\\n    <p class=\\\"success\\\">{{secureKEY}}</p>\\r\\n  \\r\\n    <ion-card-content>\\r\\n      <form (ngSubmit)=\\\"changePassword(fchangep)\\\" #fchangep=\\\"ngForm\\\">\\r\\n        <ion-row>\\r\\n          <ion-col>    \\r\\n            <ion-list>    \\r\\n              <ion-item>\\r\\n                <ion-label></ion-label>\\r\\n                <ion-input name=\\\"password\\\"\\r\\n                           type=\\\"text\\\" \\r\\n                           required\\r\\n                           [(ngModel)]=\\\"password.pass\\\"\\r\\n                           min=\\\"5\\\"\\r\\n                           placeholder=\\\"{{'CHANGEPASSWORD.newpassword' | translate}}\\\" ></ion-input>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <ion-label></ion-label>\\r\\n                <ion-input name=\\\"repassword\\\"\\r\\n                           type=\\\"text\\\"                            \\r\\n                           [(ngModel)]=\\\"password.repass\\\"\\r\\n                           (onChage)=\\\"verifyPasswords(password.repass)\\\"\\r\\n                           placeholder=\\\"Confirmar contraseña\\\" \\r\\n                           min=\\\"5\\\"\\r\\n                           required></ion-input>\\r\\n              </ion-item>\\r\\n            </ion-list>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n    \\r\\n        <ion-row>\\r\\n          <ion-col>\\r\\n            <ion-button type=\\\"submit\\\" \\r\\n                        color=\\\"warning\\\" \\r\\n                        shape=\\\"round\\\" \\r\\n                        expand=\\\"block\\\"\\r\\n                        [disabled]=\\\"fchangep.invalid\\\">\\r\\n              {{'CHANGEPASSWORD.bottonchange' | translate}}\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n    \\r\\n      </form>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChangePasswordPage } from './change-password.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChangePasswordPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule \r\n  ],\r\n  declarations: [ChangePasswordPage]\r\n})\r\nexport class ChangePasswordPageModule {}\r\n","export default \".ssl {\\n  width: 40%;\\n  height: 100%;\\n  margin-left: 32%;\\n  margin-top: 12px;\\n}\\n\\n.success {\\n  color: #000000;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhbmdlLXBhc3N3b3JkL0M6XFxVc2Vyc1xcTmVtZXNzaXNcXERlc2t0b3BcXGR2XFxmc3UgLSBDb3B5IC0gY29waWEvc3JjXFxhcHBcXHBhZ2VzXFxjaGFuZ2UtcGFzc3dvcmRcXGNoYW5nZS1wYXNzd29yZC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NoYW5nZS1wYXNzd29yZC9jaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksVUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0FDQ0o7O0FERUE7RUFDSSxjQUFBO0VBQ0Esa0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYW5nZS1wYXNzd29yZC9jaGFuZ2UtcGFzc3dvcmQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNzbHtcclxuICAgIHdpZHRoOiA0MCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBtYXJnaW4tbGVmdDogMzIlO1xyXG4gICAgbWFyZ2luLXRvcDogMTJweDtcclxufVxyXG5cclxuLnN1Y2Nlc3N7XHJcbiAgICBjb2xvcjogIzAwMDAwMDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHJcbn1cclxuIiwiLnNzbCB7XG4gIHdpZHRoOiA0MCU7XG4gIGhlaWdodDogMTAwJTtcbiAgbWFyZ2luLWxlZnQ6IDMyJTtcbiAgbWFyZ2luLXRvcDogMTJweDtcbn1cblxuLnN1Y2Nlc3Mge1xuICBjb2xvcjogIzAwMDAwMDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { UsersService } from 'src/app/services/users.service';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { AES256 } from '@ionic-native/aes-256/ngx';\r\nimport { Platform } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport {FormGroup, FormBuilder, Validators} from '@angular/forms';\r\n\r\n\r\n@Component({\r\n  selector: 'app-change-password',\r\n  templateUrl: './change-password.page.html',\r\n  styleUrls: ['./change-password.page.scss'],\r\n})\r\nexport class ChangePasswordPage implements OnInit {\r\n  password ={\r\n    iduser : '',\r\n    pass : '',\r\n    repass: ''\r\n  }\r\n  iduser = '';\r\n  theResponse = {};\r\n\r\n  secureKEY='';\r\n  secureIV='';\r\n  sw = 0;\r\n  skey='4FWCC-M3XVT-xxer-MKQYG-HP7YB-78784-RHPFQ-KP4R4-7841-K7X36';\r\n\r\n  fchangep = FormGroup;\r\n\r\n  constructor(private activeRoute: ActivatedRoute,\r\n              private userService: UsersService,\r\n              private toastCtrl: ToastController,\r\n              private aes256: AES256,\r\n              private platform: Platform,\r\n              private router: Router,) {\r\n                platform.ready().then(() => {\r\n                  this.platform.pause.subscribe(() => {\r\n                    //this.logout();\r\n                  });\r\n                  this.platform.resume.subscribe(() => {\r\n                    console.log('[INFO] App resumed');\r\n                  });\r\n                })\r\n\r\n               }\r\n\r\n  ngOnInit() {\r\n    this.generateSecureKeyAndIV();\r\n    this.iduser = this.activeRoute .snapshot.paramMap.get('iduser');\r\n  }\r\n\r\n  logout() {\r\n    console.log(\"Logging out user\");\r\n    this.router.navigate(['/home']);\r\n  }\r\n\r\n  changePassword(fchangep: NgForm){\r\n    console.log(fchangep.valid);\r\n    if (fchangep.invalid) {  return; }\r\n    this.password.iduser = this.iduser;\r\n    console.log(this.password);\r\n\r\n    if (this.password.pass === this.password.repass ) {\r\n      if (this.password.pass.length < 5 ) {\r\n        this.password.pass = '';\r\n        this.password.repass = '';\r\n        this.presentToast('La contraseña debe tener mínimo 5 caracteres');\r\n      }else{\r\n        this.userService.updatePassword(this.password).subscribe(response => {\r\n          this.theResponse = response;\r\n          if (!this.theResponse) {\r\n            this.password.pass = '';\r\n            this.password.repass = '';\r\n            this.presentToast('No se ha podido actualizar la contraseña');\r\n          }else{\r\n            this.password.pass = '';\r\n            this.password.repass = '';\r\n            this.presentToast('Se ha cambiado la contraseña con éxito');\r\n            this.router.navigate(['/contacts']);\r\n          }\r\n        })\r\n      }      \r\n    }else{\r\n      this.password.pass = '';\r\n      this.password.repass = '';\r\n      this.presentToast('Las contraseñas ingresadas no coinciden');\r\n    }    \r\n  }\r\n\r\n  async presentToast( message: string){\r\n    const toast = await this.toastCtrl.create({\r\n      message,\r\n      duration: 3500,\r\n      position: 'middle'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async generateSecureKeyAndIV() {\r\n    this.secureKEY = await this.aes256.generateSecureKey(this.skey); // Returns a 32 bytes string\r\n    this.secureIV = await this.aes256.generateSecureIV(this.skey); // Returns a 16 bytes string\r\n  }\r\n\r\nverifyPasswords(rePassword){\r\n \r\n}\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"pages-change-password-change-password-module-es5.js"}