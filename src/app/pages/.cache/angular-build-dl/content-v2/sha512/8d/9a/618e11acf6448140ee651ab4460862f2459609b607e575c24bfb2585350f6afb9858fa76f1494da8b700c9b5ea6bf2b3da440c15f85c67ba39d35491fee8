{"version":3,"sources":["./src/app/pages/chat-new/chat-new.page.html","./src/app/pages/chat-new/chat-new.module.ts","./src/app/pages/chat-new/chat-new.page.scss","./src/app/pages/chat-new/chat-new.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,+eAAgb,iBAAiB,IAAI,aAAa,k0BAAk0B,gBAAgB,mDAAmD,wBAAwB,wDAAwD,oBAAoB,iEAAiE,iCAAiC,omBAAomB,cAAc,kDAAkD,yBAAyB,wDAAwD,oBAAoB,iEAAiE,kCAAkC,48B;;;;;;;;;;;;;;;;;;;;;;;ACA/2E;AACM;AACF;AACU;AAEV;AAEC;AACC;AAE/C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,0DAAW;KACvB;CACF,CAAC;AAYF,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;CAAG;AAApB,iBAAiB;IAV7B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,2DAAc;SACf;QACD,YAAY,EAAE,CAAC,0DAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;AC3B9B;AAAe,yEAAU,eAAe,gBAAgB,oBAAoB,EAAE,eAAe,oBAAoB,EAAE,kBAAkB,eAAe,oBAAoB,EAAE,oBAAoB,gBAAgB,8CAA8C,wBAAwB,qBAAqB,iBAAiB,uBAAuB,wBAAwB,EAAE,cAAc,2BAA2B,yBAAyB,EAAE,+CAA+C,+xC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA5a;AACT;AACqB;AACL;AACW;AACR;AAEjB;AACN;AACc;AACQ;AACC;AACrB;AAOvC,IAAa,WAAW,GAAxB,MAAa,WAAW;IAqDtB,YAAoB,OAAgB,EAC1B,WAAyB,EACzB,cAA8B,EAC9B,eAAgC,EAChC,MAAc,EACd,WAAwB,EACxB,MAAc,EACd,WAAwB,EACxB,MAAc;QARJ,YAAO,GAAP,OAAO,CAAS;QAC1B,gBAAW,GAAX,WAAW,CAAc;QACzB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QA5CxB,iBAAY,GAAG;YACb,MAAM,EAAE,EAAE;YACV,QAAQ,EAAE,EAAE;SACb;QACD,SAAI,GAAG;YACL,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,EAAE;SACf;QACD,aAAQ,GAAG,EAAE,CAAC;QACd,YAAO,GAAG,EAAE,CAAC;QACb,kBAAa,GAAC,EAAE,CAAC;QACjB,WAAM,GAAC,EAAE,CAAC;QACV,SAAI,GAAG,sCAAsC,CAAC;QAC9C,mBAAc,GAAE,EAAE,CAAC;QAGnB,SAAI,GAAW,yEAAW,CAAC,SAAS,CAAC;QACrC,gBAAW,GAAG;YACZ,OAAO,EAAE,EAAE;YACX,UAAU,EAAE,EAAE;YACd,QAAQ,EAAE,EAAE;YACZ,IAAI,EAAE,EAAE;YACR,KAAK,EAAE,EAAE;YACT,SAAS,EAAE,EAAE;YACb,QAAQ,EAAE,EAAE;YACZ,QAAQ,EAAE,IAAI,CAAC,GAAG,EAAE;SACrB;QACD,aAAQ,GAAG;YACT,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,EAAE;YACP,IAAI,EAAE,EAAE;YACR,QAAQ,EAAE,EAAE;YACZ,UAAU,EAAE,EAAE;YACd,SAAS,EAAE,EAAE;SACd;IAU4B,CAAC;IAE9B,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpE,sBAAsB;QACtB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAAE;YACnE,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC,gBAAgB,CAAC,CAAC;QACnD,CAAC,CAAC;QAEF,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,EAAE;YAC3D,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,cAAc,CAAC,CAAC;QACtD,CAAC,CAAC;QAEF,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YAC1D,OAAO,CAAC,GAAG,CAAC,wCAAwC,EAAE,OAAO,CAAC,CAAC;QACjE,CAAC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YAC3C,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE;gBAC5D,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC3C,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;gBACrC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAChD,gBAAgB;gBAEhB,uBAAuB;gBACvB,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE;oBAClF,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG;oBACtC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;oBAClD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;oBACtD,gBAAgB;oBAChB,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,IAAI,CAAC,QAAQ,EAAE,CAAC;oBAChB,IAAI,CAAC,sBAAsB,EAAE,CAAC;oBAE/B,gDAAgD;gBAEjD,CAAC,CAAC,EAAC,yBAAyB;YAE9B,CAAC,CAAC,EAAC,uCAAuC;QAC5C,CAAC,CAAC;IACJ,CAAC,CAAC,aAAa;IAEf,QAAQ,CAAC,EAAG;QACV,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,IAAI,CAAC;QACT,IAAI,CAAC,YAAY,GAAC;YAChB,MAAM,EAAE,IAAI,CAAC,IAAI;YACjB,QAAQ,EAAE,IAAI,CAAC,SAAS;SACzB;QACD,IAAI,CAAC,IAAI,GAAG;YACV,QAAQ,EAAE,IAAI,CAAC,IAAI;YACnB,UAAU,EAAE,IAAI,CAAC,SAAS;SAC3B;QAED,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAE,SAAS,CAAC,EAAE;YACnE,4DAA4D;YAC3D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,EAAG,SAAS,CAAC,QAAQ,EAAE,CAAE,CAAC;QAChE,CAAC,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,YAAY,GAAE;YACnF,IAAI,GAAG,YAAY,CAAC,QAAQ,CAAC;YAC7B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBACd,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACvC,CAAC,CAAC;YACF,IAAI,EAAE,EAAE;gBACN,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBACrB,IAAI,YAAY,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;oBACtC,EAAE,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAC1B,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;iBACf;aACF;QACH,CAAC,CAAC;IACJ,CAAC;IAEK,WAAW,CAAC,QAAgB;;YAChC,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,IAAI,CAAC,aAAa,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAEtD,IAAI,CAAC,WAAW,GAAG;gBACjB,OAAO,EAAE,IAAI,CAAC,aAAa;gBAC3B,UAAU,EAAE,IAAI,CAAC,SAAS;gBAC1B,QAAQ,EAAE,IAAI,CAAC,IAAI;gBACnB,IAAI,EAAE,GAAG;gBACT,KAAK,EAAE,EAAE;gBACT,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,QAAQ,EAAE,IAAI,CAAC,GAAG,EAAE;aACrB;YAGD,aAAa;YACb,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,mBAAmB,CAAC,EAAE;YACxE,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,SAAS,CAAE,SAAS,CAAC,EAAE;gBAClE,IAAI,CAAC,QAAQ,GAAG;oBACd,MAAM,EAAE,SAAS,CAAC,QAAQ;oBAC1B,GAAG,EAAE,IAAI,CAAC,aAAa;oBACvB,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;oBAC3B,QAAQ,EAAE,IAAI,CAAC,IAAI;oBACnB,UAAU,EAAE,IAAI,CAAC,SAAS;oBAC1B,SAAS,EAAE,EAAE;iBACd;gBACF,gDAAgD;gBAC/C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAC,EAAE,GAAG,EAAG,IAAI,CAAC,QAAQ,EAAE,CAAE,CAAC;YAEzD,CAAC,CAAC;YAEF,mBAAmB;YACnB,IAAI,CAAC,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,GAAC,CAAC,CAAC;YACxF,iDAAiD;QAEjD,CAAC;KAAA,mBAAkB;IAEnB,OAAO,CAAC,IAAI;QACV,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,qDAAW,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;QAEtE,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,OAAO,CAAC,aAAa;QACnB,IAAI,CAAC,cAAc,GAAG,qDAAW,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,+CAAI,CAAC,CAAC;QAC3E,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAEK,sBAAsB;;YAC1B,IAAI,CAAC,SAAS,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,4BAA4B;YAC7F,IAAI,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,4BAA4B;QAC7F,CAAC;KAAA;IAED,SAAS;QACP,IAAI,QAAQ,GAAG;YACb,OAAO,EAAE,IAAI,CAAC,KAAK;YACnB,UAAU,EAAE,IAAI,CAAC,UAAU;SAC5B;QACD,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAAE;YAC1E,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC,KAAK;QAC3C,CAAC,CAAC;IACJ,CAAC;IAED,YAAY;QACV,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;IACtC,CAAC;CAEF;;YA5J8B,sDAAO;YACb,2EAAY;YACT,8DAAc;YACb,iFAAe;YACxB,sDAAM;YACD,yEAAW;YAChB,gEAAM;YACD,0EAAW;YAChB,qDAAM;;AA7Db,WAAW;IALvB,+DAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,wNAAmC;;KAEpC,CAAC;2EAsD6B,sDAAO;QACb,2EAAY;QACT,8DAAc;QACb,iFAAe;QACxB,sDAAM;QACD,yEAAW;QAChB,gEAAM;QACD,0EAAW;QAChB,qDAAM;GA7Db,WAAW,CAiNvB;AAjNuB;AAoNxB,oBAAoB","file":"pages-chat-new-chat-new-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"warning\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"goToContacts()\\\">\\n      <ion-icon src=\\\"assets/icons/arrow-back.svg\\\"></ion-icon>\\n    </ion-button>\\n  </ion-buttons>\\n\\n  <ion-buttons class=\\\"\\\">\\n    <ion-avatar slot=\\\"\\\" color=\\\"warning\\\">\\n      <img src=\\\"../../../assets/avatars/av-10.png\\\" class=\\\"avatar\\\">\\n    </ion-avatar>\\n    <label class=\\\"username\\\">{{usernameContact}} ({{nameContact}})</label>\\n  </ion-buttons>\\n\\n  <ion-buttons slot=\\\"primary\\\">\\n    <ion-button  (click)=\\\"logout()\\\">\\n      <ion-icon  slot=\\\"end\\\" src=\\\"/assets/icons/power.svg\\\" class=\\\"icon-logout\\\" ></ion-icon>\\n    </ion-button>\\n  </ion-buttons>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <!--space to menu lateral rigth-->\\n<ion-row>\\n  <ion-col size=\\\"9\\\" *ngIf=\\\"message.senderId !== currentUser && message.type === '1' \\\"\\n          class=\\\"message other-message\\\">\\n          <div *ngIf=\\\"currentUser  !== message.deleteAlpha || currentUser === message.deletebetha\\\">\\n            <div *ngIf=\\\"currentUser !== message.deletebetha\\\">\\n              <div class=\\\"user\\\" >\\n                <ion-icon src=\\\"/assets/icons/redo.svg\\\" class=\\\"icon-app\\\" (click)=\\\"presentMenuBar(message.body, message.receiverId)\\\"></ion-icon> {{ receivername }} <br>\\n              </div>\\n              <span>{{ decrypt(message.body)}}</span>\\n              <div class=\\\"mess text-right\\\">{{ message.createdAt}}</div>\\n              <div class=\\\"decode text-right\\\">Decoded {{message.createAt | date:'short'}}</div>\\n            </div>\\n          </div>\\n        </ion-col>\\n\\n        <ion-col offset=\\\"3\\\" size=\\\"9\\\" *ngIf=\\\"message.senderId === currentUser && message.type === '1' && currentUser !== message.deleteAlpha\\\"\\n          class=\\\"message my-message\\\">\\n          <div *ngIf=\\\"currentUser  !== message.deleteAlpha || currentUser === message.deletebetha\\\">\\n            <div *ngIf=\\\"currentUser !== message.deletebetha\\\">\\n              <div class=\\\"user\\\">\\n                <ion-icon src=\\\"/assets/icons/redo.svg\\\" class=\\\"icon-app\\\" (click)=\\\"presentMenuBar(message.body, message.receiverId)\\\"></ion-icon> {{ sendername }}<br>\\n              </div>\\n              <span>{{ decrypt(message.body) }}</span>\\n              <div class=\\\"mess text-right\\\">{{ message.createdAt}}</div>\\n              <div class=\\\"decode text-right\\\">Encoded {{message.createAt | date:'short' }}</div>\\n              <ion-icon src=\\\"assets/icons/checkmark-outline.svg\\\" *ngIf=\\\"message.isread === '0'\\\"></ion-icon>\\n              <ion-icon src=\\\"assets/icons/checkmark-done-outline.svg\\\" *ngIf=\\\"message.isread === '1'\\\"></ion-icon>\\n            </div>\\n          </div>\\n        </ion-col>\\n</ion-row>\\n  \\n</ion-content>\\n\\n\\n<ion-footer color=\\\"warning\\\">\\n  <ion-toolbar color=\\\"light\\\">\\n    <ion-row class=\\\"align-items-center\\\" class=\\\"ion-no-padding\\\">\\n      <ion-col size=\\\"10\\\">\\n        <textarea autosize maxRows=\\\"4\\\" [(ngModel)]=\\\"message\\\" class=\\\"message-input\\\"></textarea>\\n      </ion-col>\\n      <ion-col size=\\\"2\\\">\\n        <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" color=\\\"warning\\\" [disabled]=\\\"message === ''\\\" class=\\\"msg-btn\\\"\\n          (click)=\\\"sendMessage()\\\">\\n          <ion-icon src=\\\"assets/icons/send.svg\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatNewPage } from './chat-new.page';\nimport { AutosizeModule }  from 'ngx-autosize';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatNewPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    AutosizeModule\n  ],\n  declarations: [ChatNewPage]\n})\nexport class ChatNewPageModule {}\n","export default \".avatar {\\n  width: 75%;\\n  height: 75%;\\n  margin-top: 10%; }\\n\\n.username {\\n  font-size: 13px; }\\n\\n.icon-logout {\\n  color: red;\\n  font-size: 20px; }\\n\\n.message-input {\\n  width: 100%;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 10px;\\n  background: #fff;\\n  resize: none;\\n  padding-left: 10px;\\n  padding-right: 10px; }\\n\\n.msg-btn {\\n  --padding-start: 0.5em;\\n  --padding-end: 0.5em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdC1uZXcvQzpcXFVzZXJzXFxOZW1lc3Npc1xcRGVza3RvcFxcZGV2XFxBYnJpbFxcZnN1L3NyY1xcYXBwXFxwYWdlc1xcY2hhdC1uZXdcXGNoYXQtbmV3LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFVBQVU7RUFDVixXQUFXO0VBQ1gsZUFBZSxFQUFBOztBQUduQjtFQUNJLGVBQWMsRUFBQTs7QUFHbEI7RUFDRyxVQUFVO0VBQ1YsZUFBZSxFQUFBOztBQUdsQjtFQUNJLFdBQVc7RUFDWCx5Q0FBeUM7RUFDekMsbUJBQW1CO0VBQ25CLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLG1CQUFtQixFQUFBOztBQUdyQjtFQUNFLHNCQUFnQjtFQUNoQixvQkFBYyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2hhdC1uZXcvY2hhdC1uZXcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmF2YXRhcntcclxuICAgIHdpZHRoOiA3NSU7XHJcbiAgICBoZWlnaHQ6IDc1JTtcclxuICAgIG1hcmdpbi10b3A6IDEwJTtcclxufVxyXG5cclxuLnVzZXJuYW1le1xyXG4gICAgZm9udC1zaXplOjEzcHg7XHJcbn1cclxuXHJcbi5pY29uLWxvZ291dHtcclxuICAgY29sb3I6IHJlZDtcclxuICAgZm9udC1zaXplOiAyMHB4O1xyXG59XHJcblxyXG4ubWVzc2FnZS1pbnB1dCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICByZXNpemU6IG5vbmU7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xyXG4gIH1cclxuXHJcbiAgLm1zZy1idG4ge1xyXG4gICAgLS1wYWRkaW5nLXN0YXJ0OiAwLjVlbTtcclxuICAgIC0tcGFkZGluZy1lbmQ6IDAuNWVtO1xyXG4gIH1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { UsersService } from 'src/app/services/users.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ContactsService } from 'src/app/services/contacts.service';\nimport { ChatService } from 'src/app/services/chat.service';\nimport { NgForm } from '@angular/forms';\nimport * as utf8 from 'crypto-js/enc-utf8';\nimport * as AES from 'crypto-js/aes';\nimport { AES256 } from '@ionic-native/aes-256/ngx';\nimport { environment } from 'src/environments/environment';\nimport { PushService } from 'src/app/services/push.service';\nimport { Socket } from 'ngx-socket-io';\n\n@Component({\n  selector: 'app-chat-new',\n  templateUrl: './chat-new.page.html',\n  styleUrls: ['./chat-new.page.scss'],\n})\nexport class ChatNewPage implements OnInit {\n  // vars Current User\n  mySid;\n  myId;\n  myUsername;\n  mytest;\n\n  //vars Receiver User\n  arrayContact;\n  sidContact;\n  idContact;\n  usernameContact;\n  nameContact;\n  notiIdContact;\n\n  //varsMessages\n  page;\n  participants = {\n    sender: '',\n    receiver: ''\n  }\n  part = {\n    senderId: '',\n    receiverId: ''\n  }\n  messages = [];\n  message = '';\n  cipherMessage='';\n  cipher='';\n  key1 = '123456789abcdefghijklmnopqrstuuvwxyz';\n  decodedMessage ='';\n  private secureKEY: string;\n  private secureIV: string;\n  skey: string = environment.sekretKey;\n  messageBody = {\n    message: '',\n    receiverid: '',\n    senderid: '',\n    type: '',\n    image: '',\n    secureKey: '',\n    secureIv: '',\n    createAt: Date.now(),\n  }\n  toSocket = {\n    convId: '',\n    msg: '',\n    type: '',\n    senderId: '',\n    receiverId: '',\n    audioFile: ''\n  }\n\n  constructor(private storage: Storage,\n    private userService: UsersService,\n    private activatedRoute: ActivatedRoute,\n    private contactsService: ContactsService,\n    private router: Router,\n    private chatService: ChatService,\n    private aes256: AES256,\n    private pushService: PushService,\n    private socket: Socket,) { }\n\n  ngOnInit() {\n    this.socket.connect();\n    this.sidContact = this.activatedRoute.snapshot.paramMap.get('hash');\n    //Get Var current User\n    this.socket.fromEvent('privateMessage').subscribe(responseSockPriv => {\n      console.log('Respuesta SOcket',responseSockPriv);\n    })\n\n    this.socket.fromEvent('messageP').subscribe(resSockMessage => {\n      console.log(\"PASOOOOOOOOOOOOOOOOOOOOOOO\");\n      console.log(\"@@@@@@@@@@@@@@@@@@@@\", resSockMessage);\n    })\n\n    this.socket.fromEvent('testConnection').subscribe(resTest => {\n      console.log(\"+++++++++Prueba conexion con el socket\", resTest);\n    })\n\n    this.storage.get('username').then((result) => {\n      this.userService.getSekretId(result).subscribe(responseUser => {\n        this.mySid = responseUser.user[0].sekretid;\n        this.myId = responseUser.user[0]._id;\n        this.myUsername = responseUser.user[0].username;\n        // For more vars\n\n        //Get Vars Contact User\n        this.userService.getUserNameBySekretId(this.sidContact).subscribe(responseContact => {\n          this.arrayContact = responseContact.user[0];\n          this.idContact = this.arrayContact._id\n          this.usernameContact = this.arrayContact.username;\n          this.notiIdContact = this.arrayContact.notificationId;\n          // for more vars\n          this.getRename();\n          this.loadData();\n          this.generateSecureKeyAndIV();         \n\n         // this.socket.fromEvent('messageP').subscribe()\n          \n        }) //end userService Contact\n\n      }) //end userService My Current user      \n    })\n  } //end on init\n\n  loadData(ev?){\n    this.page++;\n    let mmsg;\n    this.participants={\n      sender: this.myId,\n      receiver: this.idContact\n    }\n    this.part = {\n      senderId: this.myId,\n      receiverId: this.idContact\n    }\n\n    this.chatService.getCoversationid(this.part).subscribe( resConvId => {\n     // console.log('& & & & & & &  & & & ', resConvId.idConver);\n      this.socket.emit('enterRoom', { data : resConvId.idConver } );\n    })\n\n    this.chatService.getMessagesNew(this.participants,this.page).subscribe(responseChat=> {\n      mmsg = responseChat.response;\n      mmsg.map(elem => {\n        this.messages.unshift(elem.messages);\n      })\n      if (ev) {\n        ev.target.complete();\n        if (responseChat.response.length === 0) {\n          ev.target.disabled = true;\n          this.page = 0;\n        }\n      }\n    })\n  }\n\n  async sendMessage(formChat: NgForm) {\n    let messageInput = this.message;\n    this.cipherMessage = await this.encrypt(messageInput);\n\n    this.messageBody = {\n      message: this.cipherMessage,\n      receiverid: this.idContact,\n      senderid: this.myId,\n      type: '1',\n      image: '',\n      secureKey: this.secureKEY,\n      secureIv: this.secureIV,\n      createAt: Date.now(),\n    }\n\n    \n    //sendMessage\n    this.chatService.send(this.messageBody).subscribe(responseSendMessage =>{\n    });\n    \n    this.chatService.getCoversationid(this.part).subscribe( resConvId => {\n      this.toSocket = {\n        convId: resConvId.idConver,\n        msg: this.cipherMessage,\n        type: this.messageBody.type,\n        senderId: this.myId,\n        receiverId: this.idContact,\n        audioFile: ''\n      }\n     // console.log('++++++++++++++', this.toSocket);\n      this.socket.emit('enterRoom',{ asd : this.toSocket } );\n      \n    })    \n\n    //send notification\n    this.pushService.sendPushNotification(this.notiIdContact).subscribe(responseNoti =>{})\n  //  console.log('====+++====', this.messageBody);\n\n  }//end Send Message\n\n  encrypt(data) {\n    const dat2 = data.toString();\n    this.cipher = AES.encrypt(JSON.stringify(data), this.key1).toString();\n    \n    return this.cipher;\n  }\n\n  decrypt(encryptedData) {\n    this.decodedMessage = AES.decrypt(encryptedData, this.key1).toString(utf8);\n    return this.decodedMessage;\n  }\n\n  async generateSecureKeyAndIV() {\n    this.secureKEY = await this.aes256.generateSecureKey(this.skey); // Returns a 32 bytes string\n    this.secureIV = await this.aes256.generateSecureIV(this.skey); // Returns a 16 bytes string\n  }\n\n  getRename() { // getContact Alias\n    let contacts = {\n      sidUser: this.mySid,\n      sidcontact: this.sidContact\n    }\n    this.contactsService.getAliasContact(contacts).subscribe(responseContacts => {\n      this.nameContact = responseContacts.alias\n    })\n  }\n\n  goToContacts() {\n    this.router.navigate(['/contacts']);\n  }\n\n}\n\n\n//this.receiverSid ="],"sourceRoot":"webpack:///"}